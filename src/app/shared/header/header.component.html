<header class="header-section" [class.scrolled]="isScrolled">
  <div class="header-container">
    <div class="header-wrapper">

      <!-- Logo -->
      <div class="logo">
        <a [routerLink]="getLink('/home')" (click)="closeMobileMenu()">
          <img src="/assets/img/logo/newlogo2.png" alt="Logo">
        </a>
      </div>

      <nav class="centered-nav" [class.active]="mobileMenuOpen">
        <ul class="menu-list">

          <li>
            <a [routerLink]="getLink('/home')" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" (click)="closeMobileMenu()">
              <i class="fa-solid fa-house"></i>
              <span>{{ text('home') }}</span>
            </a>
          </li>

          <!-- Hosting Dropdown -->
          <li class="has-submenu"
              (mouseenter)="onMenuItemEnter('hosting')"
              (mouseleave)="onMenuItemLeave()">
            <button class="menu-button" (click)="toggleSubmenu('hosting', $event)" [class.active]="activeSubmenu === 'hosting'">
              <span>{{ text('hosting') }}</span>
              <i class="fa-solid fa-chevron-down"></i>
            </button>
            <ul class="submenu" [class.active]="activeSubmenu === 'hosting'"
                (mouseenter)="onMenuItemEnter('hosting')"
                (mouseleave)="onMenuItemLeave()">
              <li><a [routerLink]="getLink('/dedicated')" (click)="closeMobileMenu()">{{text('navdedicated')}}</a></li>
              <li><a [routerLink]="getLink('/vps')" (click)="closeMobileMenu()">{{text('navvps')}}</a></li>
            </ul>
          </li>

          <!-- Promos -->
          <li>
            <a [routerLink]="getLink('/promos')" routerLinkActive="active" (click)="closeMobileMenu()">
              <span>{{ text('promos') }}</span>
            </a>
          </li>

          <li>
            <a [routerLink]="getLink('/articles')" routerLinkActive="active" (click)="closeMobileMenu()">
              <i class="fa-solid fa-newspaper"></i>
              <span>{{ text('blog') }}</span>
            </a>
          </li>

          <!-- Account Dropdown -->
          <li class="has-submenu"
              (mouseenter)="onMenuItemEnter('account')"
              (mouseleave)="onMenuItemLeave()">
            <button class="menu-button account-btn"
                    type="button"
                    (click)="toggleSubmenu('account', $event)"
                    [class.active]="activeSubmenu === 'account'">

              <!-- Logged In: Name + Icon -->
              <ng-container *ngIf="isLoggedIn && currentUser; else guestLabel">
                <span class="user-name-wrapper">
                  <i class="fa-solid fa-circle-user user-icon-bg"></i>
                  <span class="user-name">{{ currentUser.name }}</span>
                </span>
              </ng-container>

              <ng-template #guestLabel>
                <span>{{ text('headerAccount') }}</span>
              </ng-template>

              <i class="fa-solid fa-chevron-down"></i>
            </button>

            <ul class="submenu"
                [class.active]="activeSubmenu === 'account'"
                (click)="$event.stopPropagation()"
                (mouseenter)="onMenuItemEnter('account')"
                (mouseleave)="onMenuItemLeave()">

              <!-- Not Logged In -->
              <ng-container *ngIf="!isLoggedIn">
                <li><a [routerLink]="getLink('/signin')" (click)="closeMobileMenu()">{{ text('signIn') }}</a></li>
                <li><a [routerLink]="getLink('/signup')" (click)="closeMobileMenu()">{{ text('signUp') }}</a></li>
              </ng-container>

              <!-- Logged In -->
              <ng-container *ngIf="isLoggedIn">
                <li *ngIf="authService.isAdmin()">
                  <a [routerLink]="getLink('/admin/dashboard')" (click)="closeMobileMenu()">
                    <i class="fa-solid fa-gauge-high"></i> Admin Dashboard
                  </a>
                </li>
                <li class="divider"></li>
                <li>
                  <a (click)="logout(); closeMobileMenu()" class="logout-link">
                    <i class="fa-solid fa-arrow-right-from-bracket"></i> {{ text('logout') }}
                  </a>
                </li>
              </ng-container>
            </ul>
          </li>

        </ul>

        <!-- Mobile Actions -->
        <div class="nav-actions" *ngIf="isMobile">
          <a [routerLink]="getLink('/contact')" class="btn-primary" (click)="closeMobileMenu()">{{ text('contact') }}</a>
          <button class="btn-lang" (click)="toggleLang($event)">
            <i class="fa-solid fa-globe"></i>
            <span>{{ currentLang === 'en' ? 'EN' : 'AR' }}</span>
          </button>
        </div>
      </nav>

      <!-- Desktop Actions -->
      <div class="nav-actions" *ngIf="!isMobile">
        <a [routerLink]="getLink('/contact')" class="btn-primary">{{ text('contact') }}</a>
        <button class="btn-lang" (click)="toggleLang($event)">
          <i class="fa-solid fa-globe"></i>
          <span>{{ currentLang === 'en' ? 'EN' : 'AR' }}</span>
        </button>
      </div>

      <!-- Mobile Toggle -->
      <button class="mobile-toggle" [class.active]="mobileMenuOpen" (click)="toggleMobileMenu()">
        <span></span><span></span><span></span>
      </button>

      <div class="nav-overlay" [class.active]="mobileMenuOpen" (click)="closeMobileMenu()"></div>
    </div>
  </div>
</header>
