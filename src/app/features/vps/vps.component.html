<!--Banner Start-->
<section class="breadcumnd__banner">
   <div class="container">
      <div class="row align-items-center">
         <div class="col-lg-6">
            <div class="banner__content">
               <h6>{{ text('tabVps') }}</h6>
               <h4>{{ text('getHosting') }}</h4>
               <ul class="ssd__list">
                  <li>
                     <span><i class="fa-solid fa-arrow-right"></i></span>
                     <span>Managed Performance, Security, & Updates</span>
                  </li>
                  <li>
                     <span><i class="fa-solid fa-arrow-right"></i></span>
                     <span>Faster Unlimited Services</span>
                  </li>
                  <li>
                     <span><i class="fa-solid fa-arrow-right"></i></span>
                     <span>Performance & Unlimited hosting</span>
                  </li>
               </ul>
               <a href="https://wa.me/+201063194547?text=Hello,%20I%27m%20interested%20in%20your%20hosting%20services!" class="cmn--btn">
                  <span>{{ text('getHosting') }}</span>
               </a>
            </div>
         </div>
         <div class="col-lg-6">
            <div class="banner__Thumb">
               <img src="assets/img/about/vps.png" alt="VPS Hosting" class="img-fluid">
            </div>
         </div>
      </div>
   </div>
</section>
<!--Banner End-->

<!-- ðŸ”¥ FILTER OVERLAY -->
<div class="filter-overlay" [class.active]="filterSidebarOpen" (click)="closeFilterSidebar()"></div>

<!-- ðŸ”¥ FILTER OVERLAY -->
<div class="filter-overlay" [class.active]="filterSidebarOpen" (click)="closeFilterSidebar()"></div>

<!-- ðŸ”¥ FILTER SIDEBAR - NO SCROLL, HORIZONTAL CHECKBOXES -->
<aside class="filter-sidebar" [class.active]="filterSidebarOpen">
   <div class="filter-sidebar-header">
      <h5>
         <i class="fa-solid fa-sliders"></i>
         {{ text('filterServers') || 'Filter Servers' }}
      </h5>
      <button class="close-btn" (click)="closeFilterSidebar()" aria-label="Close filters">
         <i class="fa-solid fa-times"></i>
      </button>
   </div>

   <div class="filter-sidebar-content">
      <!-- ðŸ”¥ CPU CORES - HORIZONTAL -->
      <div class="filter-group">
         <label class="form-label">
            <i class="fa-solid fa-microchip"></i>
            {{ text('cpuCores') || 'CPU Cores' }}
         </label>
         <div class="checkbox-group horizontal">
            <label class="checkbox-item" *ngFor="let core of cpuOptions; let i = index">
               <input type="checkbox"
                      [id]="'core-' + i"
                      [checked]="isCoreSelected(core)"
                      (change)="toggleCore(core)">
               <span class="checkmark"></span>
               <span class="checkbox-label">{{core}} Core{{core > '1' ? 's' : ''}}</span>
            </label>
         </div>
      </div>

      <!-- ðŸ”¥ RAM - HORIZONTAL -->
      <div class="filter-group">
         <label class="form-label">
            <i class="fa-solid fa-memory"></i>
            {{ text('ram') || 'RAM' }}
         </label>
         <div class="checkbox-group horizontal">
            <label class="checkbox-item" *ngFor="let ram of ramOptions; let i = index">
               <input type="checkbox"
                      [id]="'ram-' + i"
                      [checked]="isRamSelected(ram)"
                      (change)="toggleRam(ram)">
               <span class="checkmark"></span>
               <span class="checkbox-label">{{ram}} GB</span>
            </label>
         </div>
      </div>

      <!-- ðŸ”¥ STORAGE TYPE - HORIZONTAL -->
      <div class="filter-group">
         <label class="form-label">
            <i class="fa-solid fa-hard-drive"></i>
            Storage Type
         </label>
         <div class="checkbox-group horizontal">
            <label class="checkbox-item" *ngFor="let type of storageOptions; let i = index">
               <input type="checkbox"
                      [id]="'storage-' + i"
                      [checked]="isStorageSelected(type)"
                      (change)="toggleStorage(type)">
               <span class="checkmark"></span>
               <span class="checkbox-label">{{ type === 'nvme' ? 'NVMe' : type === 'ssd' ? 'SSD' : 'HDD' }}</span>
            </label>
         </div>
      </div>

      <!-- ðŸ”¥ PRICE SLIDER -->
      <div class="filter-group">
         <label class="form-label">
            <i class="fa-solid fa-dollar-sign"></i>
            {{ text('maxPrice') || 'Max Price' }} (USD)
         </label>
         <div class="price-slider-container">
            <input type="range"
                   class="price-slider"
                   id="priceSlider"
                   [(ngModel)]="filters.maxPrice"
                   min="0"
                   max="200"
                   step="5"
                   (input)="onPriceChange()">
            <div class="price-slider-values">
               <span>${{ filters.maxPrice || 0 }}</span>
               <span>Max Price</span>
            </div>
         </div>
      </div>
   </div>

<div class="filter-actions-instant">
   <button class="btn-clear-all"
           (click)="resetFilters()"
           *ngIf="getActiveFilterCount() > 0">
      <i class="fa-solid fa-rotate-right"></i>
      <span>Clear All</span>
   </button>

   <button class="btn-close" (click)="closeFilterSidebar()">
      <i class="fa-solid fa-times"></i>
      <span>Close</span>
   </button>
</div>
</aside>

<!-- ðŸ”¥ BEST 3 SERVERS - HOSTINGER STYLE -->
<section class="featured-servers pt-60 pb-40" *ngIf="!loading && filtered.length >= 3">
   <div class="container">
      <div class="section__header text-center">
         <span class="subtitle">Black Friday Deals</span>
         <h3 class="section-title">Don't miss the Best VPS Servers</h3>
         <p class="section-desc">
            <i class="fa-solid fa-shield-check"></i> 30-day money-back guarantee &nbsp;&nbsp;
            <i class="fa-solid fa-rotate"></i> Cancel anytime &nbsp;&nbsp;
            <i class="fa-solid fa-headset"></i> 24/7 support
         </p>
      </div>

      <div class="featured-grid">
         <!-- Card 1 - Premium -->
         <div class="featured-card">
            <div class="badge-discount">85% OFF</div>

            <div class="featured-card-header">
               <h4 class="plan-name">{{ getBestThree()[0]?.category || 'Premium' }}</h4>
               <p class="plan-subtitle">Everything you need to get started</p>
            </div>

            <div class="price-section">
               <span class="price-old">US$ {{ (getBestThree()[0]?.price * 6.67) | number:'1.2-2' }}</span>
               <div class="price-tag">
                  <span class="currency">US$</span>
                  <span class="amount">{{ getBestThree()[0]?.price }}</span>
                  <span class="period">/mo</span>
               </div>
               <span class="price-bonus">+2 months free</span>
            </div>

            <ul class="featured-specs">
               <li>
                  <i class="fa-solid fa-microchip"></i>
                  <span>{{ getBestThree()[0]?.cores }} CPU Cores</span>
               </li>
               <li>
                  <i class="fa-solid fa-memory"></i>
                  <span>{{ getBestThree()[0]?.ramGB }} GB RAM</span>
               </li>
               <li>
                  <i class="fa-solid fa-hard-drive"></i>
                  <span>{{ getBestThree()[0]?.storageGB }} GB {{ getBestThree()[0]?.storageType }}</span>
               </li>
               <li>
                  <i class="fa-solid fa-gauge-high"></i>
                  <span>{{ getBestThree()[0]?.connectionSpeed || 'High-Speed Network' }}</span>
               </li>
               <li>
                  <i class="fa-solid fa-shield-check"></i>
                  <span>Free SSL Certificate</span>
               </li>
            </ul>

            <div class="featured-card-footer">
               <button class="btn-order" (click)="orderNow(getBestThree()[0]?.id)">
                  <span>Order Now</span>
                  <i class="fa-solid fa-arrow-right"></i>
               </button>
               <div class="limited-time-deal">
                  <span>Limited time deal</span>
               </div>
            </div>
         </div>

         <!-- Card 2 - Business (MOST POPULAR) -->
         <div class="featured-card popular">
            <div class="badge-popular">MOST POPULAR</div>
            <div class="badge-discount">85% OFF</div>

            <div class="featured-card-header">
               <h4 class="plan-name">{{ getBestThree()[1]?.category || 'Business' }}</h4>
               <p class="plan-subtitle">More tools and power for growth</p>
            </div>

            <div class="price-section">
               <span class="price-old">US$ {{ (getBestThree()[1]?.price * 6.88) | number:'1.2-2' }}</span>
               <div class="price-tag">
                  <span class="currency">US$</span>
                  <span class="amount">{{ getBestThree()[1]?.price }}</span>
                  <span class="period">/mo</span>
               </div>
               <span class="price-bonus">+2 months free</span>
            </div>

            <ul class="featured-specs">
               <li>
                  <i class="fa-solid fa-microchip"></i>
                  <span>{{ getBestThree()[1]?.cores }} CPU Cores</span>
               </li>
               <li>
                  <i class="fa-solid fa-memory"></i>
                  <span>{{ getBestThree()[1]?.ramGB }} GB RAM</span>
               </li>
               <li>
                  <i class="fa-solid fa-hard-drive"></i>
                  <span>{{ getBestThree()[1]?.storageGB }} GB {{ getBestThree()[1]?.storageType }}</span>
               </li>
               <li>
                  <i class="fa-solid fa-gauge-high"></i>
                  <span>{{ getBestThree()[1]?.connectionSpeed || 'Premium Network' }}</span>
               </li>
               <li>
                  <i class="fa-solid fa-shield-check"></i>
                  <span>Priority Support</span>
               </li>
            </ul>

            <div class="featured-card-footer">
               <button class="btn-order" (click)="orderNow(getBestThree()[1]?.id)">
                  <span>Order Now</span>
                  <i class="fa-solid fa-arrow-right"></i>
               </button>
               <div class="limited-time-deal">
                  <span>Limited time deal</span>
               </div>
            </div>
         </div>

         <!-- Card 3 - Cloud Startup -->
         <div class="featured-card">
            <div class="badge-discount">73% OFF</div>

            <div class="featured-card-header">
               <h4 class="plan-name">{{ getBestThree()[2]?.category || 'Cloud Startup' }}</h4>
               <p class="plan-subtitle">20X more power for your websites with Cloud hosting</p>
            </div>

            <div class="price-section">
               <span class="price-old">US$ {{ (getBestThree()[2]?.price * 3.70) | number:'1.2-2' }}</span>
               <div class="price-tag">
                  <span class="currency">US$</span>
                  <span class="amount">{{ getBestThree()[2]?.price }}</span>
                  <span class="period">/mo</span>
               </div>
               <span class="price-bonus">+2 months free</span>
            </div>

            <ul class="featured-specs">
               <li>
                  <i class="fa-solid fa-microchip"></i>
                  <span>{{ getBestThree()[2]?.cores }} CPU Cores</span>
               </li>
               <li>
                  <i class="fa-solid fa-memory"></i>
                  <span>{{ getBestThree()[2]?.ramGB }} GB RAM</span>
               </li>
               <li>
                  <i class="fa-solid fa-hard-drive"></i>
                  <span>{{ getBestThree()[2]?.storageGB }} GB {{ getBestThree()[2]?.storageType }}</span>
               </li>
               <li>
                  <i class="fa-solid fa-cloud"></i>
                  <span>Cloud-Powered Infrastructure</span>
               </li>
               <li>
                  <i class="fa-solid fa-rocket"></i>
                  <span>Ultra-Fast Performance</span>
               </li>
            </ul>

            <div class="featured-card-footer">
               <button class="btn-order" (click)="orderNow(getBestThree()[2]?.id)">
                  <span>Order Now</span>
                  <i class="fa-solid fa-arrow-right"></i>
               </button>
               <div class="limited-time-deal">
                  <span>Limited time deal</span>
               </div>
            </div>
         </div>
      </div>
   </div>
</section>

<!-- ðŸ”¥ ALL SERVERS -->
<section class="pricing__domain pt-60 pb-120">
   <div class="container-fluid px-4">
      <div class="section__header text-center">
         <span class="subtitle">Complete Range</span>
         <h3 class="section-title d-flex justify-content-center align-items-center gap-3 flex-wrap">
            <!-- ðŸ”¥ FILTER BUTTON -->
            <div class="filter-title-group">
               <span class="filter-title-text">Filter</span>
               <button class="filter-toggle-btn-inline"
                       [class.active]="filterSidebarOpen || getActiveFilterCount() > 0"
                       (click)="toggleFilterSidebar()"
                       aria-label="Filter Results">
                  <i class="fa-solid fa-sliders" [class.fa-times]="filterSidebarOpen"></i>
                  <span class="filter-count-badge" *ngIf="getActiveFilterCount() > 0">
                     {{ getActiveFilterCount() }}
                  </span>
               </button>
            </div>
            <span class="all-plans-text">All VPS Hosting Plans</span>
         </h3>

         <p class="section-desc">
            {{ filtered.length }} server{{ filtered.length !== 1 ? 's' : '' }} found
            <span class="filter-text" *ngIf="getActiveFilterCount() > 0">
               â€¢ {{ getActiveFilterCount() }} filter{{ getActiveFilterCount() > 1 ? 's' : '' }} applied
            </span>
         </p>
      </div>

      <!-- ðŸ”¥ LOADING -->
      <div class="loading-state" *ngIf="loading">
         <div class="spinner"></div>
         <p>Loading servers...</p>
      </div>

      <!-- ðŸ”¥ ERROR -->
      <div class="error-state" *ngIf="error && !loading">
         <i class="fa-solid fa-exclamation-triangle"></i>
         <h4>Oops! Something went wrong</h4>
         <p>{{ error }}</p>
         <button class="btn-retry" (click)="loadProducts()">
            <i class="fa-solid fa-rotate-right"></i>
            <span>Try Again</span>
         </button>
      </div>

      <!-- ðŸ”¥ NO RESULTS -->
      <div class="no-results-enhanced" *ngIf="!loading && !error && filtered.length === 0">
         <div class="no-results-icon">
            <i class="fa-solid fa-server"></i>
         </div>
         <h4 class="no-results-title">No Servers Found</h4>
         <p class="no-results-subtitle">
            We couldn't find any VPS plans matching your criteria
         </p>
         <div class="no-results-actions">
            <button class="btn btn-primary" (click)="resetFilters()">
               <i class="fa-solid fa-rotate-right"></i>
               <span>Clear All Filters</span>
            </button>
            <button class="btn btn-outline" (click)="toggleFilterSidebar()">
               <i class="fa-solid fa-sliders"></i>
               <span>Adjust Filters</span>
            </button>
         </div>
         <div class="no-results-suggestion">
            <p><strong>Try these popular options:</strong></p>
            <ul>
               <li>4+ CPU Cores</li>
               <li>8+ GB RAM</li>
               <li>NVMe or SSD Storage</li>
               <li>Under $50/month</li>
            </ul>
         </div>
      </div>

      <!-- ðŸ”¥ SERVER GRID -->
      <div class="server-grid" *ngIf="!loading && !error && filtered.length > 0">
         <div class="server-card-wrapper" *ngFor="let p of filtered; trackBy: trackByFn">
            <div class="server-card">
               <div class="server-card-badge">
                  <span>{{ p.storageType || p.StorageType || 'SSD' }}</span>
               </div>

               <div class="server-card-header">
                  <h5 class="server-title">{{ p.category || p.Category || 'VPS Plan' }}</h5>
               </div>

               <div class="server-card-price">
                  <span class="price-amount">${{ p.price || p.Price }}</span>
                  <span class="price-period">/mo</span>
               </div>

               <ul class="server-specs">
                  <li>
                     <span>
                        <i class="fa-solid fa-microchip"></i>
                        CPU
                     </span>
                     <div class="spec-info">
                        <span class="spec-label">Cores</span>
                        <span class="spec-value">{{ p.cores || p.Cores || 'â€”' }}</span>
                     </div>
                  </li>
                  <li>
                     <span>
                        <i class="fa-solid fa-memory"></i>
                        RAM
                     </span>
                     <div class="spec-info">
                        <span class="spec-label">Memory</span>
                        <span class="spec-value">{{ p.ramGB || p.RamGB || 'â€”' }} GB</span>
                     </div>
                  </li>
                  <li>
                     <span>
                        <i class="fa-solid fa-hard-drive"></i>
                        Storage
                     </span>
                     <div class="spec-info">
                        <span class="spec-label">Disk Space</span>
                        <span class="spec-value">{{ p.storageGB || p.StorageGB || 'â€”' }} GB</span>
                     </div>
                  </li>
                  <li *ngIf="p.connectionSpeed || p.ConnectionSpeed">
                     <span>
                        <i class="fa-solid fa-gauge-high"></i>
                        Speed
                     </span>
                     <div class="spec-info">
                        <span class="spec-label">Network</span>
                        <span class="spec-value">{{ p.connectionSpeed || p.ConnectionSpeed }}</span>
                     </div>
                  </li>
               </ul>

               <div class="server-card-footer">
                  <button class="btn-order-small" (click)="orderNow(p.id || p.Id)">
                     <span>{{ text('orderNow') }}</span>
                     <i class="fa-solid fa-arrow-right"></i>
                  </button>
               </div>
            </div>
         </div>
      </div>
   </div>
</section>
