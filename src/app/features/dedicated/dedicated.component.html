<section class="breadcumnd__banner">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-6">
        <div class="banner__content">
          <h6>Dedicated Servers</h6>
          <h4>High-Performance Dedicated Hosting</h4>
          <ul class="ssd__list">
            <li><span><i class="fa-solid fa-arrow-right"></i></span> Full Root Access & Isolation</li>
            <li><span><i class="fa-solid fa-arrow-right"></i></span> 100% Dedicated Resources</li>
            <li><span><i class="fa-solid fa-arrow-right"></i></span> 24/7 Expert Support & Monitoring</li>
          </ul>
          <a href="https://wa.me/+201063194547?text=Hello,%20I%27m%20interested%20in%20Dedicated%20Servers!" class="cmn--btn">
            <span>Get Started Now</span>
          </a>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="banner__Thumb">
               <img src="assets/img/hosting/clidhost.png" alt="about-img">
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Filter Overlay & Sidebar (same as VPS) -->
<div class="filter-overlay" [class.active]="filterSidebarOpen" (click)="closeFilterSidebar()"></div>

<aside class="filter-sidebar" [class.active]="filterSidebarOpen">
  <div class="filter-sidebar-header">
    <h5 class="filter-sidebar-title" style="color:#00cdfb;">
      <i class="fa-solid fa-sliders"></i>
      {{ text('filterServers') || 'Filter Servers' }}
    </h5>
    <button class="close-btn" (click)="closeFilterSidebar()" aria-label="Close filters">
      <i class="fa-solid fa-times"></i>
    </button>
  </div>

  <div class="filter-sidebar-content">
    <div class="filter-group">
      <label class="form-label">
        <i class="fa-solid fa-microchip"></i>
        {{ text('cpuCores') || 'CPU Cores' }}
      </label>
      <div class="checkbox-group horizontal">
        <label class="checkbox-item" *ngFor="let core of cpuOptions; let i = index">
          <input type="checkbox"
                 [id]="'core-' + i"
                 [checked]="isCoreSelected(core)"
                 (change)="toggleCore(core)">
          <span class="checkmark"></span>
          {{core}} Core{{ core !== '1' ? 's' : '' }}        </label>
      </div>
    </div>

    <div class="filter-group">
      <label class="form-label">
        <i class="fa-solid fa-memory"></i>
        {{ text('ram') || 'RAM' }}
      </label>
      <div class="checkbox-group horizontal">
        <label class="checkbox-item" *ngFor="let ram of ramOptions; let i = index">
          <input type="checkbox"
                 [id]="'ram-' + i"
                 [checked]="isRamSelected(ram)"
                 (change)="toggleRam(ram)">
          <span class="checkmark"></span>
          <span class="checkbox-label">{{ram}} GB</span>
        </label>
      </div>
    </div>

    <div class="filter-group">
      <label class="form-label">
        <i class="fa-solid fa-server"></i>
        Brand / CPU Model
      </label>
      <div class="checkbox-group horizontal">
        <label class="checkbox-item" *ngFor="let brand of brandOptions; let i = index">
          <input type="checkbox"
                 [id]="'brand-' + i"
                 [checked]="isBrandSelected(brand)"
                 (change)="toggleBrand(brand)">
          <span class="checkmark"></span>
          <span class="checkbox-label">{{brand}}</span>
        </label>
      </div>
    </div>

    <div class="filter-group">
      <label class="form-label">
        <i class="fa-solid fa-dollar-sign"></i>
        {{ text('maxPrice') || 'Max Price' }} (USD)
      </label>
      <div class="price-slider-container">
        <input type="range"
               class="price-slider"
               [(ngModel)]="filters.maxPrice"
               min="0"
               max="1000"
               step="10"
               (input)="onPriceChange()">
        <div class="price-slider-values">
          <span>${{ filters.maxPrice || 0 }}</span>
          <span>Max Price</span>
        </div>
      </div>
    </div>
  </div>

  <div class="filter-actions-instant">
    <button class="btn-clear-all"
            (click)="resetFilters()"
            *ngIf="getActiveFilterCount() > 0">
      <i class="fa-solid fa-rotate-right"></i>
      <span>Clear All</span>
    </button>
    <button class="btn-close" (click)="closeFilterSidebar()">
      <i class="fa-solid fa-times"></i>
      <span>Close</span>
    </button>
  </div>
</aside>

<section class="featured-servers pt-60 pb-40" *ngIf="!loading && getTopThreeDedicated().length === 3">
  <div class="container">
    <div class="section__header text-center">
      <span class="subtitle">Best Deals This Month</span>
      <h3 class="section-title">Top Dedicated Servers This Month</h3>
      <p class="section-desc">
        30-day money-back · 99.9% Uptime · 24/7 Expert Support
      </p>
    </div>

    <div class="featured-grid">
      <ng-container *ngFor="let item of getTopThreeDedicated(); let i = index">
        <div class="featured-card" [class.popular]="i === 1">
          <div class="badge-discount" *ngIf="item.type === 'intel'">Best INTEL</div>
          <div class="badge-discount" *ngIf="item.type === 'amd'">Best AMD</div>
          <div class="badge-popular" *ngIf="item.type === 'value'">BEST VALUE</div>
          <div class="badge-discount" *ngIf="item.type === 'fallback'">GREAT DEAL</div>

          <div class="featured-card-header">
            <h4 class="plan-name">{{ item.server.brand || item.server.cpuModel || 'Dedicated Server' }}</h4>
            <p class="plan-subtitle">
              <span [ngSwitch]="item.type">
                <span *ngSwitchCase="'intel'">Best price Intel server</span>
                <span *ngSwitchCase="'amd'">Best price AMD server</span>
                <span *ngSwitchCase="'value'">Lowest price per core</span>
                <span *ngSwitchDefault>High performance deal</span>
              </span>
            </p>
          </div>

          <div class="price-section">
            <div class="price-tag">
              <span class="currency">US$</span>
              <span class="amount">{{ item.server.price }}</span>
              <span class="period">/mo</span>
            </div>
          </div>

          <ul class="featured-specs">
            <li><i class="fa-solid fa-microchip"></i> {{ item.server.cores }} Cores</li>
            <li><i class="fa-solid fa-memory"></i> {{ item.server.ramGB }} GB RAM</li>
            <li><i class="fa-solid fa-hard-drive"></i> {{ item.server.storage || item.server.storageGB }}</li>
            <li><i class="fa-solid fa-gauge-high"></i> {{ item.server.connectionSpeed || '10 Gbps' }}</li>
          </ul>

          <div class="featured-card-footer">
            <button class="btn-order" (click)="orderNow(item.server.id)">
              <span>Order Now</span>
              <i class="fa-solid fa-arrow-right"></i>
            </button>
            <div class="limited-time-deal"><span>Limited time deal</span></div>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
</section>
<!-- All Plans Section (Same as VPS) -->
<section class="pricing__domain pt-60 pb-120">
  <div class="container-fluid px-4">
    <div class="section__header text-center">
      <span class="subtitle">Full Power</span>
      <h3 class="section-title d-flex justify-content-center align-items-center gap-3 flex-wrap">
        <div class="filter-title-group">
          <span class="filter-title-text">Filter</span>
          <button class="filter-toggle-btn-inline"
                  [class.active]="filterSidebarOpen || getActiveFilterCount() > 0"
                  (click)="toggleFilterSidebar()">
            <i class="fa-solid fa-sliders" [class.fa-times]="filterSidebarOpen"></i>
            <span class="filter-count-badge" *ngIf="getActiveFilterCount() > 0">{{ getActiveFilterCount() }}</span>
          </button>
        </div>
        <span class="all-plans-text">All Dedicated Servers</span>
      </h3>
      <p class="section-desc">
        {{ filtered.length }} server{{ filtered.length !== 1 ? 's' : '' }} available
        <span class="filter-text" *ngIf="getActiveFilterCount() > 0">
          • {{ getActiveFilterCount() }} filter{{ getActiveFilterCount() > 1 ? 's' : '' }} applied
        </span>
      </p>
    </div>

    <!-- Loading / Error / Empty States -->
    <div class="loading-state" *ngIf="loading">
      <div class="spinner"></div>
      <p>Loading dedicated servers...</p>
    </div>

    <div class="error-state" *ngIf="error && !loading">
      <i class="fa-solid fa-exclamation-triangle"></i>
      <h4>Oops! Something went wrong</h4>
      <p>{{ error }}</p>
      <button class="btn-retry" (click)="loadProducts()"><i class="fa-solid fa-rotate-right"></i> Try Again</button>
    </div>

    <div class="no-results-enhanced" *ngIf="!loading && filtered.length === 0">
      <div class="no-results-icon">
        <i class="fa-solid fa-server"></i>
      </div>
      <h4 class="no-results-title">No Dedicated Servers Found</h4>
      <p class="no-results-subtitle">Try adjusting your filters or clearing them</p>
      <div class="no-results-actions">
        <button class="btn btn-primary" (click)="resetFilters()"><i class="fa-solid fa-rotate-right"></i> Clear Filters</button>
      </div>
    </div>

    <!-- Grid of All Plans -->
    <div class="featured-grid all-plans-grid" *ngIf="!loading && filtered.length > 0">
      <div class="featured-card" *ngFor="let p of filtered; trackBy: trackByFn">
        <div class="badge-discount" *ngIf="p.discount">{{ p.discount }} OFF</div>

        <div class="featured-card-header">
          <h4 class="plan-name">{{ p.brand || p.cpuModel || 'Dedicated Server' }}</h4>
          <p class="plan-subtitle">Full root access · 100% dedicated</p>
        </div>

        <div class="price-section">
          <div class="price-tag">
            <span class="currency">US$</span>
            <span class="amount">{{ p.price }}</span>
            <span class="period">/mo</span>
          </div>
        </div>

        <ul class="featured-specs">
          <li><i class="fa-solid fa-microchip"></i> <span>{{ p.cores }} CPU Cores</span></li>
          <li><i class="fa-solid fa-memory"></i> <span>{{ p.ramGB }} GB RAM</span></li>
          <li><i class="fa-solid fa-hard-drive"></i> <span>{{ p.storage || p.storageGB }} Storage</span></li>
          <li *ngIf="p.connectionSpeed"><i class="fa-solid fa-gauge-high"></i> <span>{{ p.connectionSpeed }}</span></li>
          <li><i class="fa-solid fa-shield-check"></i> <span>DDoS Protection</span></li>
        </ul>

        <div class="featured-card-footer">
          <button class="btn-order" (click)="orderNow(p.id)">
            <span>Order Now</span>
            <i class="fa-solid fa-arrow-right"></i>
          </button>
          <div class="limited-time-deal" *ngIf="p.limited">
            <span>Limited time deal</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
